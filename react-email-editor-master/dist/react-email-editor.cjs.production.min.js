"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var i=[],r=!1,d=function(){if(r)for(var e;e=i.shift();)e()},l="undefined"==typeof window?{__unlayer_lastEditorId:0}:window;l.__unlayer_lastEditorId=l.__unlayer_lastEditorId||0;var a=o.forwardRef((function(e,a){var u,s,c,f,p,v,y,E,m,_=e.onLoad,h=e.onReady,j=e.scriptUrl,b=e.minHeight,I=void 0===b?500:b,O=e.style,g=void 0===O?{}:O,w=t.useState(null),x=w[0],M=w[1],L=t.useState(!1),S=L[0],H=L[1],R=t.useMemo((function(){return e.editorId||"editor-"+ ++l.__unlayer_lastEditorId}),[e.editorId]),k=n({},e.options||{},{appearance:null!==(u=e.appearance)&&void 0!==u?u:null===(s=e.options)||void 0===s?void 0:s.appearance,displayMode:(null==e?void 0:e.displayMode)||(null===(c=e.options)||void 0===c?void 0:c.displayMode)||"email",locale:null!==(f=e.locale)&&void 0!==f?f:null===(p=e.options)||void 0===p?void 0:p.locale,projectId:null!==(v=e.projectId)&&void 0!==v?v:null===(y=e.options)||void 0===y?void 0:y.projectId,tools:null!==(E=e.tools)&&void 0!==E?E:null===(m=e.options)||void 0===m?void 0:m.tools,id:R,source:{name:"react-email-editor",version:"1.7.11"}});t.useImperativeHandle(a,(function(){return{editor:x}}),[x]),t.useEffect((function(){return function(){null==x||x.destroy()}}),[]),t.useEffect((function(){H(!1),function(e,t){if(void 0===t&&(t="https://editor.unlayer.com/embed.js?2"),i.push((function(){return H(!0)})),function(e){var t=document.querySelectorAll("script"),o=!1;return t.forEach((function(t){t.src.includes(e)&&(o=!0)})),o}(t))d();else{var o=document.createElement("script");o.setAttribute("src",t),o.onload=function(){r=!0,d()},document.head.appendChild(o)}}(0,j)}),[j]),t.useEffect((function(){S&&(null==x||x.destroy(),M(unlayer.createEditor(k)))}),[JSON.stringify(k),S]);var q=Object.keys(e).filter((function(e){return/^on/.test(e)}));return t.useEffect((function(){x&&(null==_||_(x),q.forEach((function(t){/^on/.test(t)&&"onLoad"!==t&&"onReady"!==t&&"function"==typeof e[t]&&x.addEventListener(t,e[t])})),h&&x.addEventListener("editor:ready",(function(){h(x)})))}),[x,Object.keys(q).join(",")]),o.createElement("div",{style:{flex:1,display:"flex",minHeight:I}},o.createElement("div",{id:R,style:n({},g,{flex:1})}))}));exports.EmailEditor=a,exports.default=a;
//# sourceMappingURL=react-email-editor.cjs.production.min.js.map
